// MoneyBot 3.0 - moneybot3.js
// Authors: Joe 'currentsea' Bull & Martin Markowski 
// https://github.com/currentsea/moneybot 

/* BEGIN LICENSE */ 
// Copyright (c) 2017 Joseph 'currentsea' Bull

// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:

// The above copyright notice and this permission notice shall be included in all
// copies or substantial portions of the Software.

// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
// SOFTWARE.
/* END LICENSE */ 

/** VARIABLE DECLARATIONS */ 
var username = 'beebo'  // Falcon Master's username 
var botusername = 'moneyfalcon' // The bot's username
var startingbet = 2; 
var betincrement = 1.065; 
var takeprofitpoint = 1899; 
var lastmartingale = 0; 
var gamesplayedcount = 0; 
var takeprofitincrementinterval = 0.9999; 
var playgamecriteria = 1866; 
var gamewaitcount = 5; 
var martingalewaitcount = 0; 
var moneybot = 0; 
var medianupper = 1.96; 
var maxwinninggames = 33; 
var maxlosinggames = 33; 
var resetlosscountonwin = false; 
var winningstreakbetincrement = 1; 
var abortwhenmedianfails = 0; 
var abortonfailedentrycriteria = 0; 
var botpriority = 1;    
var bethistory = []; 
var gamehistory = [];  
var gameresults = []; 
var historicalmedian = 197; 
console.log('starting median: ' + historicalmedian); 
var currentbet = startingbet; 
var multiplier = takeprofitpoint;
var triggeredbusts = 0; 
var grosswinnings = 0; 
var grosslosses = 0; 
var numwinners = 0; 
var numlosers = 0; 
var numskipped = 0; 
var netprofits = 0; 
var totalprofit = 0; 
var losingsteak = 0; 
var paperbetting = 0; 
var moneybotlength = 0; 
var moneybotconfirmations = 0;
var gameselapsed = 0; 
var verbose = false; 
var state = 0; 
var cooldownelapsed = 0; 
var cooldowncount = 3; 
var winrate = 0;
var chatbet = false; 
var mimic = false; 
var shibamessage = "!bust 19"; 
var startingbalance = engine.getBalance(); 
var currentbalance = startingbalance; 
var pregamebalance = currentbalance; 
var laststatus = engine.lastGamePlay(); 
var targetmimic = 'MountainDew'; 
var startgamerecords = []; 
var usersplaying = []; 
var falconexample = "FALCON mimic abc";
var mimicbet = 0; 
var falconregexp = /(?:^|\s)FALCON\s(.*?)\s(.*?)\s(.*)(?:\s|$)/g;
var gamemode = "MARTINGALE"; 
var martingalecount = 0; 
var martingalebet = startingbet; 
var martingaletpi = takeprofitpoint; 
var random_mimic = false; 
var breakpoints = [216, 139, 190, 143, 162, 239, 143, 228, 217, 200, 179, 201, 267, 154, 239, 203, 246, 243, 247, 244, 200, 192, 245, 193, 269, 187, 251, 224, 244, 226, 185, 244, 132, 230, 216, 161, 267, 144, 155, 184, 138, 136, 261, 228, 218, 267, 165, 191, 224, 209, 171, 199, 151, 250, 249, 219, 159, 146, 232, 244, 148, 201, 201, 229, 210, 182, 145, 225, 233, 141, 273, 271, 231, 189, 151, 264, 191, 154, 199, 150, 131, 239, 161, 146, 272, 155, 212, 151, 227, 226, 237, 176, 257, 156, 219, 264, 232, 180, 217, 257, 153, 135, 197, 268, 224, 177, 253, 252, 216, 179, 257, 140, 157, 212, 249, 220, 247, 151, 247, 140, 239, 232, 192, 257, 191, 131, 154, 172, 217, 225, 233, 202, 202, 170, 212, 275, 239, 178, 258, 193, 272, 251, 133, 198, 214, 140, 149, 183, 143, 168, 163, 184, 166, 205, 165, 261, 194, 220, 235, 260, 271, 185, 164, 144, 152, 208, 269, 255, 174, 207, 161, 212, 267, 194, 190, 252, 210, 136, 264, 271, 161, 273, 138, 256, 142, 134, 192, 193, 163, 204, 218, 144, 204, 141, 164, 274, 157, 237, 269, 202, 184, 155, 158, 241, 242, 163, 134, 227, 240, 187, 133, 222, 240, 165, 236, 151, 183, 147, 158, 251, 250, 178, 203, 274, 160, 172, 231, 188, 192, 260, 244, 168, 169, 151, 199, 257, 261, 178, 238, 139, 143, 173, 190, 261, 244, 141, 271, 155, 221, 189, 132, 220, 170, 201, 152, 217, 166, 247, 225, 177, 200, 262, 251, 268, 162, 212, 135, 270, 228, 243, 269, 259, 273, 140, 235, 228, 136, 196, 181, 253, 248, 262, 265, 267, 186, 232, 217, 188, 253, 192, 162, 205, 180, 169, 269, 139, 171, 265, 270, 176, 201, 136, 158, 173, 261, 138, 201, 236, 210, 146, 171, 207, 237, 218, 248, 164, 202, 236, 266, 193, 184, 174, 269, 272, 213, 218, 135, 178, 213, 269, 265, 218, 275, 164, 154, 242, 131, 192, 256, 225, 257, 195, 246, 138, 150, 242, 221, 146, 182, 193, 233, 237, 172, 237, 150, 173, 171, 254, 237, 144, 168, 135, 269, 172, 135, 189, 157, 232, 227, 173, 136, 215, 152, 150, 193, 204, 155, 265, 273, 248, 240, 160, 167, 253, 153, 141, 255, 239, 232, 156, 155, 258, 153, 183, 261, 178, 179, 250, 209, 239, 184, 274, 185, 188, 166, 261, 197, 220, 190, 242, 213, 134, 182, 170, 211, 189, 141, 152, 236, 178, 168, 248, 168, 186, 233, 244, 208, 184, 152, 158, 272, 144, 226, 141, 245, 260, 169, 187, 169, 170, 170, 259, 247, 215, 180, 197, 160, 162, 167, 153, 219, 223, 184, 272, 141, 139, 272, 167, 226, 151, 199, 246, 273, 132, 154, 171, 257, 249, 147, 139, 175, 213, 230, 183, 256, 260, 225, 164, 136, 180, 218, 151, 258, 237, 232, 140, 133, 171, 238, 145, 187, 132, 161, 160, 146, 256, 270, 133, 169, 142, 146, 142, 232, 193, 226, 258, 235, 209, 220, 200, 234, 168, 206, 175, 267, 262, 273, 152, 213, 156, 241, 213, 226, 162, 265, 158, 228, 250, 253, 241, 198, 181, 275, 183, 165, 192, 142, 187, 201, 234, 154, 177, 138, 156, 274, 213, 246, 165, 131, 188, 142, 272, 226, 264, 163, 197, 197, 237, 147, 257, 183, 224, 152, 199, 144, 205, 147, 162, 215, 210, 262, 213, 137, 256, 200, 214, 187, 153, 251, 273, 209, 206, 226, 194, 184, 236, 164, 247, 223, 231, 272, 196, 165, 174, 217, 232, 262, 236, 273, 245, 208, 217, 244, 265, 180, 172, 190, 160, 273, 172, 176, 185, 202, 210, 235, 149, 266, 150, 241, 200, 173, 188, 243, 253, 260, 264, 161, 247, 208, 258, 142, 263, 149, 159, 136, 178, 274, 157, 162, 260, 205, 257, 202, 263, 181, 205, 257, 186, 212, 215, 263, 185, 185, 261, 232, 212, 199, 178, 196, 156, 144, 177, 172, 153, 199, 145, 212, 186, 214, 251, 203, 169, 217, 203, 228, 192, 218, 163, 172, 223, 215, 237, 209, 252, 210, 256, 211, 259, 227, 195, 203, 161, 241, 191, 260, 180, 171, 212, 251, 183, 208, 177, 264, 240, 230, 152, 231, 216, 203, 165, 147, 258, 249, 147, 266, 174, 157, 163, 242, 166, 210, 264, 253, 220, 227, 231, 186, 143, 199, 212, 248, 154, 253, 205, 163, 192, 238, 187, 267, 263, 212, 194, 258, 239, 270, 176, 207, 163, 204, 242, 229, 274, 250, 250, 255, 217, 169, 260, 226, 244, 187, 143, 138, 272, 157, 190, 267, 145, 209, 265, 136, 164, 211, 222, 188, 139, 247, 231, 239, 209, 267, 188, 217, 161, 175, 174, 221, 264, 263, 219, 226, 167, 237, 272, 168, 210, 192, 211, 179, 268, 215, 141, 161, 158, 146, 177, 198, 188, 193, 269, 202, 159, 138, 139, 140, 181, 212, 271, 194, 172, 186, 155, 137, 142, 159, 134, 271, 153, 209, 256, 143, 171, 251, 188, 224, 190, 229, 219, 258, 136, 182, 227, 199, 260, 206, 154, 209, 183, 152, 145, 165, 212, 170, 216, 167, 144, 192, 196, 260, 180, 190, 251, 176, 215, 161, 131, 171, 145, 194, 162, 198, 147, 164, 150, 159, 273, 171, 229, 253, 225, 152, 205, 248, 155, 146, 205, 256, 189, 135, 152, 156, 176, 189, 149, 132, 153, 217, 205, 203, 133, 242, 203, 243, 273, 171, 205, 139, 170, 231, 155, 267, 233, 177, 195, 247, 131, 229, 205, 173, 214, 139, 212, 258, 147, 190, 159, 209, 144, 204, 236, 206, 179, 136, 185, 207, 267, 230, 149, 148, 198, 275, 214, 161, 242, 157, 161, 224, 155, 188, 139, 133, 187, 248, 149, 146, 244, 183, 225, 269, 150, 228, 161, 154, 205, 252, 192, 268, 228, 186, 193, 188, 236, 196, 222, 163, 167, 243, 213, 203, 205, 251, 153, 237, 184, 214, 143, 257, 198, 180, 155, 247, 269, 247, 242, 166, 212, 176, 211, 149, 274, 188, 192, 175, 229, 148, 170, 148, 272, 256, 233, 204, 170, 247, 255, 162, 131, 203, 241, 227, 140, 218, 179, 201, 153, 220, 218, 264, 199, 239, 195, 230, 250, 233, 201, 275, 161, 272, 269, 149, 269, 197, 195, 197, 221, 195, 275, 229, 180, 131, 213, 213, 135, 229, 198, 214, 166, 192, 166, 216, 197, 209, 140, 237, 238, 223, 261, 178, 189, 230, 237, 272, 142, 223, 214, 192, 207, 209, 230, 181, 185, 226, 161, 274, 209, 131, 181, 209, 209, 140, 253, 170, 258, 154, 153, 181, 145, 258, 210, 225, 203, 257, 264, 192, 210, 140, 210, 272, 133, 236, 147, 205, 224, 173, 194, 166, 231, 250, 263, 147, 209, 224, 208, 154, 275, 166, 224, 228, 146, 214, 210, 152, 246, 151, 205, 233, 142, 271, 202, 265, 224, 208, 242, 273, 157, 172, 248, 200, 236, 200, 156, 149, 244, 203, 135, 242, 181, 273, 225, 163, 234, 227, 264, 233, 254, 214, 138, 216, 167, 185, 222, 223, 132, 235, 174, 152, 262, 253, 212, 176, 232, 240, 152, 174, 150, 219, 228, 186, 262, 273, 172, 140, 132, 259, 232, 168, 156, 179, 274, 147, 217, 193, 136, 148, 224, 160, 201, 261, 220, 187, 255, 141, 166, 138, 213, 264, 245, 198, 147, 257, 237, 163, 261, 258, 170, 211, 188, 214, 186, 183, 255, 204, 219, 222, 143, 137, 258, 141, 182, 163, 185, 213, 243, 182, 144, 163, 164, 211, 267, 272, 165, 270, 177, 269, 187, 151, 202, 219, 183, 209, 151, 220, 260, 275, 246, 154, 133, 148, 189, 153, 228, 228, 244, 201, 273, 270, 179, 203, 213, 251, 227, 238, 174, 143, 144, 226, 215, 153, 236, 176, 260, 233, 238, 144, 248, 238, 258, 192, 183, 213, 258, 215, 132, 133, 221, 215, 132, 168, 260, 237, 265, 260, 233, 175, 158, 159, 198, 146, 206, 191, 218, 270, 145, 261, 137, 167, 199, 253, 158, 222, 145, 249, 192, 230, 234, 162, 143, 181, 187, 217, 199, 157, 268, 272, 198, 171, 221, 234, 235, 165, 159, 252, 157, 195, 257, 239, 216, 241, 174, 176, 251, 195, 216, 264, 272, 191, 158, 167, 203, 195, 156, 131, 178, 258, 274, 202, 231, 132, 245, 205, 156, 207, 273, 238, 148, 141, 183, 177, 223, 184, 149, 224, 267, 134, 166, 136, 253, 229, 256, 215, 220, 174, 224, 201, 171, 162, 223, 165, 201, 157, 142, 199, 150, 212, 152, 262, 166, 192, 208, 152, 167, 242, 220, 242, 158, 264, 169, 245, 218, 230, 157, 189, 246, 174, 242, 247, 257, 133, 261, 239, 188, 208, 234, 235, 215, 171, 254, 222, 246, 154, 215, 198, 170, 271, 164, 185, 217, 220, 207, 195, 171, 241, 155, 164, 191, 178, 237, 260, 271, 240, 150, 203, 239, 194, 254, 142, 197, 139, 262, 265, 270, 193, 186, 244, 179, 245, 227, 247, 270, 175, 181, 211, 239, 267, 178, 274, 242, 188, 166, 273, 236, 196, 152, 177, 133, 212, 212, 132, 222, 157, 156, 198, 167, 275, 169, 197, 225, 164, 260, 206, 166, 193, 221, 136, 273, 187, 223, 222, 137, 262, 254, 196, 260, 258, 190, 136, 145, 271, 188, 188, 240, 145, 232, 247, 218, 252, 184, 192, 133, 265, 178, 262, 246, 205, 205, 265, 239, 143, 225, 179, 187, 177, 210, 254, 141, 194, 248, 169, 236, 135, 238, 236, 243, 144, 243, 269, 184, 190, 215, 145, 258, 204, 176, 225, 242, 254, 153, 159, 165, 137, 234, 208, 175, 259, 154, 175, 255, 262, 175, 177, 270, 160, 147, 155, 152, 190, 257, 170, 156, 218, 143, 209, 175, 266, 165, 264, 202, 156, 268, 205, 180, 260, 236, 209, 178, 257, 174, 140, 271, 188, 251, 264, 187, 211, 216, 274, 235, 202, 135, 133, 215, 162, 232, 222, 203, 175, 242, 259, 229, 274, 200, 177, 263, 161, 267, 269, 207, 180, 185, 170, 228, 269, 252, 270, 162, 133, 265, 139, 179, 193, 198, 196, 164, 212, 185, 251, 260, 184, 268, 171, 197, 179, 135, 251, 247, 199, 176, 212, 147, 184, 231, 247, 274, 153, 269, 239, 213, 213, 195, 136, 263, 222, 149, 214, 194, 149, 165, 214, 176, 186, 183, 147, 179, 205, 183, 262, 160, 274, 232, 238, 254, 191, 178, 175, 258, 228, 265, 132, 230, 228, 147, 242, 189, 259, 138, 265, 181, 266, 191, 198, 260, 210, 216, 241, 233, 228, 174, 211, 202, 250, 208, 166, 180, 185, 168, 232, 228, 163, 188, 208, 219, 139, 261, 257, 255, 229, 149, 226, 135, 137, 147, 178, 249, 226, 162, 212, 243, 209, 177, 224, 226, 164, 136, 274, 234, 202, 252, 214, 240, 173, 207, 171, 254, 131, 202, 137, 258, 135, 164, 222, 137, 136, 159, 236, 269, 174, 263, 165, 135, 225, 186, 154, 224, 265, 243, 274, 171, 134, 211, 233, 209, 140, 173, 212, 253, 221, 192, 206, 193, 161, 270, 236, 234, 253, 239, 158, 225, 218, 269, 207, 234, 248, 133, 235, 222, 146, 200, 217, 233, 185, 158, 196, 171, 273, 147, 205, 234, 192, 267, 234, 137, 261, 133, 243, 164, 181, 247, 221, 260, 183, 274, 251, 135, 167, 192, 236, 194, 135, 241, 219, 191, 200, 256, 200, 157, 159, 262, 247, 246, 266, 179, 137, 234, 153, 244, 214, 247, 236, 258, 233, 166, 152, 178, 235, 250, 219, 270, 165, 156, 219, 156, 207, 272, 268, 264, 243, 221, 273, 273, 141, 174, 188, 208, 147, 248, 172, 250, 137, 134, 202, 239, 238, 144, 238, 220, 242, 164, 266, 233, 211, 190, 225, 183, 221, 254, 216, 205, 177, 212, 175, 155, 273, 171, 147, 246, 260, 143, 137, 156, 168, 233, 185, 140, 274, 158, 207, 267, 247, 253, 161, 226, 135, 152, 196, 256, 161, 221, 256, 178, 136, 244, 218, 269, 138, 153, 173, 211, 273, 157, 218, 244, 236, 253, 164, 174, 205, 200, 217, 178, 229, 202, 166, 193, 204, 130, 137, 148, 206, 120, 200, 139, 177, 161, 129, 160, 123, 144, 187, 209, 153, 169, 143, 202, 119, 127, 176, 202, 212, 121, 182, 192, 116, 207, 173, 203, 136, 197, 176, 192, 146, 173, 193, 214, 159, 198, 184, 128, 181, 198, 156, 120, 210, 124, 163, 208, 128, 132, 213, 154, 133, 121, 133, 192, 187, 211, 171, 140, 191, 146, 163, 152, 166, 181, 168, 116, 181, 166, 194, 215, 161, 171, 180, 194, 162, 124, 190, 182, 198, 168, 191, 139, 176, 151, 147, 212, 165, 120, 194, 124, 190, 182, 142, 154, 158, 186, 123, 143, 173, 133, 115, 159, 163, 186, 147, 131, 124, 203, 172, 165, 163, 191, 180, 205, 148, 142, 162, 162, 153, 139, 142, 171, 118, 199, 181, 117, 180, 137, 163, 176, 138, 150, 141, 120, 174, 134, 131, 147, 207, 207, 129, 187, 165, 200, 181, 174, 146, 171, 172, 132, 169, 174, 160, 120, 177, 172, 133, 187, 168, 182, 156, 182, 160, 202, 168, 127, 140, 182, 129, 146, 158, 135, 210, 127, 162, 191, 166, 130, 172, 197, 162, 180, 140, 172, 146, 190, 168, 131, 196, 134, 139, 185, 198, 147, 168, 169, 194, 164, 141, 208, 149, 117, 129, 127, 126, 145, 184, 135, 208, 156, 189, 139, 129, 206, 115, 214, 144, 131, 160, 133, 202, 207, 153, 135, 126, 213, 158, 186, 202, 201, 153, 132, 167, 150, 173, 176, 116, 188, 168, 126, 141, 194, 122, 163, 116, 115, 215, 184, 186, 185, 155, 121, 143, 149, 185, 210, 148, 215, 194, 154, 212, 159, 208, 116, 215, 151, 162, 190, 183, 165, 180, 180, 178, 157, 203, 129, 122, 184, 213, 133, 212, 143, 211, 128, 152, 176, 154, 190, 155, 179, 116, 185, 192, 202, 209, 194, 144, 123, 202, 137, 189, 212, 162, 171, 153, 205, 193, 192, 127, 165, 192, 170, 150, 191, 118, 204, 179, 147, 133, 151, 211, 136, 184, 174, 116, 209, 123, 179, 215, 163, 161, 209, 161, 165, 199, 172, 122, 160, 143, 143, 126, 128, 193, 184, 130, 209, 168, 135, 172, 165, 129, 187, 196, 118, 154, 131, 207, 176, 119, 160, 157, 162, 206, 180, 212, 130, 205, 195, 201, 211, 183, 165, 131, 131, 176, 186, 131, 197, 187, 185, 206, 193, 171, 212, 164, 203, 130, 152, 125, 155, 133, 165, 195, 174, 179, 183, 130, 162, 197, 204, 190, 132, 195, 121, 148, 146, 130, 159, 188, 117, 206, 136, 137, 181, 187, 177, 137, 162, 120, 134, 160, 142, 191, 134, 135, 198, 195, 212, 140, 148, 135, 139, 193, 210, 196, 182, 138, 155, 117, 212, 160, 164, 209, 160, 191, 138, 121, 151, 151, 181, 172, 156, 156, 132, 213, 165, 167, 196, 165, 158, 157, 145, 194, 190, 208, 193, 180, 125, 147, 186, 134, 121, 153, 146, 163, 171, 191, 170, 195, 210, 171, 161, 180, 163, 159, 205, 207, 165, 166, 192, 190, 183, 156, 194, 175, 119, 181, 193, 156, 210, 161, 132, 212, 187, 118, 135, 160, 149, 190, 181, 188, 120, 148, 171, 118, 197, 172, 159, 194, 132, 184, 182, 212, 173, 164, 164, 170, 176, 171, 173, 116, 144, 159, 132, 178, 166, 166, 129, 119, 198, 182, 199, 202, 143, 200, 200, 152, 201, 117, 178, 155, 127, 172, 175, 138, 174, 202, 135, 155, 133, 212, 154, 170, 153, 196, 137, 136, 167, 152, 175, 185, 161, 182, 115, 172, 141, 170, 196, 126, 119, 133, 177, 163, 118, 122, 172, 169, 165, 163, 195, 136, 115, 116, 190, 203, 212, 201, 214, 214, 192, 136, 115, 198, 181, 184, 186, 205, 193, 201, 136, 169, 193, 195, 122, 165, 154, 149, 123, 123, 135, 155, 129, 210, 204, 124, 203, 128, 123, 145, 168, 188, 185, 125, 153, 172, 116, 131, 203, 124, 169, 178, 212, 167, 174, 159, 193, 167, 142, 170, 184, 155, 176, 195, 130, 132, 156, 160, 171, 165, 160, 124, 186, 117, 192, 190, 193, 136, 118, 193, 209, 208, 192, 143, 149, 155, 191, 129, 193, 156, 191, 123, 115, 205, 149, 192, 117, 207, 215, 215, 169, 177, 119, 178, 188, 131, 133, 174, 185, 187, 188, 186, 199, 201, 173, 152, 186, 209, 122, 122, 163, 132, 209, 147, 166, 196, 172, 119, 205, 169, 212, 214, 153, 142, 119, 140, 183, 181, 144, 156, 127, 186, 189, 192, 173, 141, 136, 187, 158, 190, 156, 152, 205, 198, 163, 171, 190, 203, 122, 214, 158, 215, 140, 120, 155, 176, 208, 122, 177, 131, 123, 149, 144, 169, 182, 201, 169, 140, 153, 143, 149, 117, 136, 192, 123, 156, 188, 126, 145, 127, 191, 139, 215, 192, 192, 154, 186, 140, 195, 183, 119, 163, 118, 190, 211, 153, 207, 180, 165, 127, 117, 198, 180, 132, 188, 178, 209, 144, 162, 125, 125, 161, 156, 117, 193, 149, 115, 163, 209, 191, 147, 179, 134, 183, 208, 164, 150, 207, 200, 178, 131, 186, 116, 175, 156, 155, 150, 197, 163, 176, 200, 134, 182, 121, 213, 174, 210, 198, 191, 179, 189, 190, 146, 158, 199, 124, 182, 206, 205, 197, 149, 210, 119, 146, 206, 124, 194, 122, 169, 144, 190, 127, 150, 153, 126, 210, 193, 201, 150, 182, 140, 175, 143, 156, 130, 176, 157, 167, 166, 181, 154, 149, 194, 193, 209, 139, 144, 174, 156, 175, 124, 176, 160, 150, 120, 146, 135, 166, 175, 207, 128, 146, 155, 190, 160, 145, 145, 140, 167, 140, 176, 163, 200, 141, 163, 156, 168, 198, 206, 200, 193, 140, 133, 189, 133, 210, 161, 142, 148, 146, 144, 203, 147, 186, 155, 210, 153, 129, 176, 173, 130, 123, 166, 132, 125, 211, 187, 126, 140, 137, 122, 137, 190, 154, 131, 212, 196, 142, 175, 158, 212, 204, 200, 135, 215, 119, 203, 205, 124, 191, 161, 174, 132, 122, 196, 141, 178, 195, 157, 189, 204, 121, 179, 153, 117, 198, 184, 124, 169, 132, 151, 131, 151, 167, 134, 116, 164, 138, 171, 200, 212, 173, 123, 212, 148, 130, 118, 172, 209, 170, 122, 186, 161, 138, 187, 173, 162, 200, 155, 166, 126, 145, 215, 158, 140, 183, 213, 135, 170, 213, 151, 157, 212, 197, 187, 139, 128, 162, 135, 137, 176, 131, 187, 209, 213, 160, 164, 171, 158, 143, 152, 150, 215, 213, 152, 163, 187, 193, 180, 157, 139, 127, 151, 171, 161, 195, 151, 162, 120, 128, 132, 120, 192, 202, 133, 201, 196, 177, 141, 129, 172, 149, 203, 187, 203, 116, 132, 142, 174, 160, 129, 169, 190, 143, 118, 123, 195, 200, 135, 184, 182, 131, 148, 121, 165, 204, 130, 118, 137, 186, 176, 165, 133, 116, 115, 179, 143, 210, 140, 180, 147, 134, 122, 204, 213, 189, 136, 172, 146, 131, 154, 180, 215, 127, 179, 208, 205, 169, 206, 210, 137, 143, 123, 140, 185, 208, 169, 181, 150, 199, 147, 120, 184, 170, 183, 150, 171, 130, 211, 207, 209, 133, 117, 122, 206, 116, 189, 195, 213, 214, 206, 188, 144, 201, 181, 180, 205, 115, 115, 136, 189, 154, 195, 179, 147, 134, 200, 183, 129, 148, 176, 162, 156, 129, 213, 165, 138, 140, 151, 120, 173, 169, 137, 135, 162, 204, 209, 146, 190, 139, 157, 208, 194, 192, 126, 127, 182, 130, 214, 212, 139, 145, 210, 151, 170, 137, 187, 166, 123, 201, 157, 192, 138, 199, 162, 125, 203, 163, 132, 168, 136, 175, 115, 122, 187, 167, 149, 208, 115, 147, 131, 197, 138, 166, 129, 197, 143, 176, 132, 150, 140, 150, 133, 197, 144, 198, 208, 128, 209, 205, 125, 212, 116, 180, 160, 120, 158, 184, 213, 157, 149, 178, 152, 193, 137, 180, 121, 215, 135, 197, 141, 173, 147, 188, 204, 168, 165, 183, 170, 124, 184, 197, 177, 156, 157, 132, 137, 183, 165, 141, 123, 165, 150, 154, 131, 197, 188, 214, 129, 207, 146, 161, 208, 201, 211, 151, 192, 175, 166, 116, 133, 164, 133, 121, 189, 156, 211, 144, 117, 127, 157, 145, 166, 148, 170, 185, 181, 184, 214, 184, 156, 134, 123, 202, 124, 168, 145, 167, 150, 160, 151, 180, 160, 117, 214, 176, 155, 123, 126, 170, 192, 169, 193, 173, 181, 188, 149, 205, 202, 184, 211, 165, 199, 189, 167, 144, 169, 175, 115, 198, 128, 198, 194, 157, 173, 165, 200, 127, 151, 136, 210, 213, 186, 162, 117, 192, 179, 207, 162, 117, 145, 124, 140, 192, 123, 153, 164, 149, 194, 129, 186, 173, 175, 123, 119, 126, 211, 143, 198, 127, 140, 163, 122, 125, 145, 120, 148, 157, 153, 137, 190, 215, 142, 176, 156, 170, 197, 137, 136, 186, 213, 132, 164, 205, 204, 214, 131, 139, 193, 168, 119, 210, 178, 188, 120, 201, 130, 135, 144, 156, 164, 122, 189, 171, 182, 181, 127, 208, 126, 151, 191, 133, 132, 193, 212, 144, 159, 206, 121, 156, 196, 121, 177, 156, 177, 123, 191, 179, 151, 201, 155, 136, 154, 160, 208, 166, 180, 192, 160, 135, 160, 173, 202, 192, 132, 192, 117, 159, 215, 213, 199, 132, 166, 161, 149, 115, 183, 174, 134, 174, 189, 161, 159, 167, 199, 124, 136, 169, 145, 139, 149, 125, 121, 152, 133, 191, 180, 131, 204, 171, 119, 176, 211, 198, 136, 159, 146, 207, 120, 123, 200, 166, 144, 117, 130, 140, 191, 121, 129, 177, 208, 181, 155, 166, 162, 116, 142, 197, 120, 132, 186, 127, 148, 197, 215, 159, 192, 115, 195, 147, 168, 188, 126, 121, 208, 189, 206, 185, 193, 206, 178, 123, 126, 158, 159, 145, 185, 177, 172, 132, 172, 149, 163, 150, 138, 190, 142, 135, 185, 150, 188, 198, 134, 152, 186, 125, 122, 121, 202, 163, 166, 189, 170, 183, 118, 173, 137, 193, 174, 183, 121, 126, 170, 124, 187, 193, 178, 196, 181, 210, 154, 157, 163, 203, 207, 147, 191, 134, 175, 197, 132, 181, 184, 141, 140, 213, 208, 126, 170, 125, 120, 182, 136, 185, 138, 129, 164, 145, 133, 126, 185, 127, 188, 131, 180, 166, 193, 180, 155, 196, 160, 122, 167, 204, 123, 125, 191, 134, 125, 215, 121, 141, 190, 151, 158, 116, 211, 152, 191, 190, 120, 176, 135, 212, 147, 207, 165, 169, 188, 188, 185, 160, 192, 173, 123, 117, 151, 156, 119, 127, 156, 191, 152, 166, 153, 203, 178, 208, 134, 137, 127, 188, 140, 187, 141, 189, 129, 202, 207, 188, 203, 171, 117, 138, 117, 200, 211, 142, 199, 142, 160, 138, 144, 142, 125, 167, 195, 185, 154, 129, 171, 128, 134, 201, 172, 174, 214, 136, 123, 207, 159, 205, 115, 168, 115, 152, 119, 128, 117, 193, 161, 207, 144, 210, 208, 139, 175, 192, 206, 184, 154, 152, 179, 183, 178, 158, 162, 213, 144, 168, 200, 125, 118, 177, 183, 199, 119, 155, 207, 181, 203, 179, 119, 129, 116, 157, 140, 187, 186, 121, 183, 145, 119, 189, 137, 204, 119, 132, 192, 138, 159, 129, 141, 183, 195, 196, 140, 204, 205, 127, 214, 208, 175, 152, 188, 158, 118, 133, 210, 154, 121, 128, 193, 157, 153, 158, 122, 190, 145, 191, 186, 130, 130, 203, 212, 144, 134, 175, 122, 193, 121, 201, 201, 203, 143, 165, 135, 151, 165, 182, 153, 212, 151, 215, 207, 154, 200, 189, 116, 157, 198, 139, 132, 187, 186, 199, 188, 162, 166, 153, 175, 205, 191, 131, 136, 146, 177, 177, 206, 214, 179, 185, 164, 181, 189, 184, 188, 148, 145, 140, 121, 209, 210, 189, 167, 155, 168, 120, 116, 189, 206, 159, 203, 215, 188, 165, 198, 203, 160, 153, 125, 171, 193, 206, 195, 192, 120, 122, 179, 193, 157, 208, 161, 167, 178, 191, 115, 145, 205, 144, 161, 202, 123, 175, 199, 160, 161, 151, 128, 170, 115, 198, 201, 164, 136, 127, 132, 176, 283, 214, 252, 270, 203, 276, 281, 275, 286, 271, 239, 237, 244, 221, 217, 216, 289, 282, 228, 281, 241, 235, 255, 244, 258, 238, 219, 217, 276, 225, 278, 251, 246, 210, 266, 226, 200, 280, 229, 200, 208, 239, 210, 217, 272, 220, 209, 271, 233, 256, 296, 296, 261, 257, 214, 280, 298, 296, 273, 244, 270, 239, 232, 259, 299, 279, 200, 213, 270, 285, 284, 221, 224, 276, 231, 225, 230, 244, 278, 277, 244, 223, 215, 214, 278, 212, 225, 211, 210, 299, 288, 211, 210, 294, 257, 274, 220, 206, 220, 600, 303, 679, 506, 644, 314, 549, 626, 651, 465, 649, 635, 692, 623, 565, 490, 483, 339, 443, 430, 583, 543, 428, 593, 470, 339, 398, 383, 496, 341, 554, 430, 635, 461, 411, 589, 602, 595, 672, 591, 531, 534, 361, 311, 654, 452, 560, 396, 574, 523, 412, 326, 533, 654, 437, 531, 384, 421, 432, 623, 240, 171, 129, 192, 177, 153, 168, 155, 145, 107, 158, 186, 188, 126, 107, 131, 124, 145, 178, 192, 107, 155, 130, 148, 180, 182, 182, 105, 198, 119, 177, 155, 120, 181, 169, 100, 124, 100, 125, 188, 132, 113, 167, 179, 141, 131, 170, 198, 137, 198, 159, 131, 137, 149, 187, 102, 140, 139, 132, 200, 131, 122, 152, 194, 199, 189, 124, 181, 155, 127, 175, 135, 125, 196, 173, 168, 146, 125, 112, 101, 110, 104, 194, 174, 143, 119, 162, 180, 166, 117, 144, 113, 161, 132, 163, 154, 888,3333,44444,666,222,333,444,1443, 796, 1213, 1211, 890, 779, 1635, 1441, 1052, 1609, 943, 1386, 1291, 961, 1420, 1429, 1020, 1274, 736, 1454, 1594, 855, 948, 1229, 1134, 1844, 1608, 1890, 1348, 875,222,333,444,333,222,333,444,2223,333,333,333,444,444,444,444,444, 160, 152, 187, 148, 194, 165, 100, 127, 173, 187, 146, 149, 192, 169, 151, 177, 142, 173, 194, 115, 152, 188, 102, 178, 182, 123, 149, 196, 106, 156, 119, 1452, 1767, 1211, 1268, 1230, 1462, 1042, 1097, 1858, 1256, 1099, 1684, 1169, 1155, 834, 1527, 1272, 1446, 848, 1614, 1768, 1611, 1410, 1414, 972, 1873, 787, 1670, 1651, 1102, 15399, 118669, 206, 16756, 170584, 235, 11762, 25471, 130, 9944, 114551, 105, 9152, 188295, 152, 12219, 150673, 144, 7914, 56366, 126, 8440, 180568, 251, 13199, 182352, 178, 4745, 109331, 256, 116, 158, 135, 171, 187, 170, 169, 167, 139, 138, 142, 137, 161, 122, 108, 123, 167, 133, 171, 125, 194, 112, 126, 105, 135, 141, 162, 182, 122, 115, 120, 112, 180, 115, 139, 129, 137, 133, 105, 154, 105, 155, 106, 155, 185, 144, 128, 191, 177, 152, 143, 194, 142, 159, 163, 159, 165, 130, 107, 145, 152, 128, 114, 147, 163, 145, 148, 161, 148, 188, 186, 131, 180, 132, 165, 158, 189, 183, 194, 147, 144, 105, 193, 146, 186, 280, 234, 299, 252, 267, 219, 313, 238, 164, 233, 120, 216, 247, 305, 174, 137, 161, 150, 209, 211, 133, 179, 169, 167, 284, 204, 184, 139, 141, 141, 252, 149, 206, 192, 269, 235, 153, 321, 168, 315, 169, 192, 240, 329, 145, 231, 200, 207, 196, 320, 155, 238, 160, 247, 267, 297, 328, 167, 239, 170, 224, 300, 147, 262, 167, 265, 304, 136, 234, 292, 268, 124, 321, 321, 294, 296, 292, 170, 262, 293, 215, 279, 142, 242, 148, 142, 270, 257, 317, 123, 177, 309, 241, 156, 120, 170, 124, 304, 180, 174, 142, 110, 181, 148, 151, 182, 146, 166, 183, 142, 196, 196, 149, 107, 112, 119, 183, 178, 191, 102, 192, 124, 138, 133, 125, 160, 189, 190, 181, 192, 125, 158, 139, 127, 103, 137, 145, 123, 100, 148, 102, 197, 127, 162, 143, 196, 185, 140, 149, 158, 104, 164, 175, 150, 192, 144, 107, 129, 157, 198, 105, 111, 172, 149, 190, 139, 143, 176, 134, 123, 123, 192, 147, 195, 191, 174, 167, 110, 181, 200, 160, 153, 171, 166, 111, 148, 126, 177, 164, 104, 133, 187, 111, 139, 149, 169, 122, 109, 126, 163, 179, 152, 116, 194, 185, 141, 187, 194, 192, 145, 142, 130, 109, 157, 113, 162, 105, 191, 128, 123, 132, 185, 135, 177, 143, 119, 163, 148, 179, 181, 179, 163, 113, 192, 164, 169, 154, 127, 182, 127, 146, 105, 182, 150, 177, 196, 130, 130, 193, 120, 171, 102, 101, 130, 198, 147, 135, 166, 144, 127, 152, 200, 184, 199, 102, 116, 139, 163, 105, 159, 119, 108, 103, 111, 127, 157, 125, 129, 138, 104, 178, 122, 159, 174, 168, 164, 155, 129, 184, 139, 103, 180, 185, 167, 167, 123, 167, 101, 136, 119, 160, 126, 133, 138, 129, 195, 117, 141, 196, 116, 152, 146, 122, 126, 153, 173, 105, 174, 135, 140, 140, 114, 134, 169, 184, 115, 120, 160, 156, 114, 100, 120, 154, 196, 163, 120, 132, 163, 192, 116, 108, 199, 170, 183, 121, 186, 168, 150, 156, 188, 198, 114, 153, 130, 177, 187, 191, 133, 122, 102, 121, 171, 169, 111, 108, 122, 135, 198, 157, 128, 112, 156, 115, 103, 159, 147, 183, 181, 152, 169, 160, 128, 180, 186, 164, 186, 179, 139, 101, 120, 176, 162, 196, 121, 152, 156, 130, 160, 165, 100, 22222, 2222, 2222, 6626, 3333, 131, 120, 158, 114, 147, 175, 132, 121, 128, 155, 149, 137, 143, 175, 165, 161, 165, 188, 136, 149, 105, 108, 109, 177, 177, 183, 183, 233, 162, 123, 166, 123, 123, 122,  185, 104, 104, 183, 107, 180, 143, 115, 125, 141, 164, 156, 132, 129, 299, 272, 227, 292, 223, 226, 252, 297, 264, 260, 218, 241, 166, 181, 123, 123, 123, 123, 123, 123, 123, 123, 123, 123, 123, 123, 123, 123, 123, 123, 123, 123, 123, 123, 123, 838, 939, 828, 828, 1234, 1616, 9829, 202, 2020, 505, 202, 5085, 603, 102, 106, 126, 6561, 162, 167, 177, 177, 188, 191, 195, 195, 193, 193, 191, 1771, 171, 171,161, 133, 141, 161, 284, 239, 204, 261, 245, 275, 255, 273, 211, 256, 224, 219, 277, 271, 296, 206, 269, 238, 251, 239, 243, 240, 173, 298, 249, 125, 136, 131, 296, 128, 129, 292, 249, 159, 206, 242, 132, 296, 125, 253, 233, 289, 182, 124, 161, 167, 289, 286, 182, 268, 165, 190, 112, 231, 264, 257, 167, 246, 285, 227, 178, 138, 253, 146, 187, 119, 150, 206, 254, 1623, 161, 176, 183, 176, 186, 223, 333, 717, 167, 134, 127, 159, 125, 156, 139, 153, 141, 172, 168, 166, 139, 127, 149, 152, 139, 146, 134, 133, 148, 158, 160, 171, 148, 162, 159, 145, 127, 131, 127, 126, 154, 158, 150, 165, 130, 158, 150, 132, 127, 136, 151, 133, 165, 144, 147, 160, 149, 133, 170, 141, 173, 135, 130, 155, 133, 151, 126, 174, 146, 143, 172, 134, 172, 155, 157, 134, 150, 167, 162, 131, 141, 139, 170, 139, 159, 128, 147, 174, 161, 169, 164, 172, 156, 162, 142, 161, 161, 149, 155, 158, 161, 167, 164, 166, 134, 174, 136, 134, 133, 141, 159, 166, 146, 157, 172, 151, 134, 151, 126, 131, 168, 158, 147, 136, 151, 174, 149, 171, 159, 174, 156, 130, 156, 170, 162, 171, 126, 154, 170, 172, 144, 142, 147, 137, 144, 175, 131, 162, 160, 157, 149, 170, 125, 136, 136, 165, 151, 136, 151, 131, 172, 170, 145, 170, 148, 170, 152, 141, 139, 131, 146, 127, 153, 125, 154, 173, 162, 157, 156, 167, 163, 133, 173, 128, 134, 164, 172, 158, 148, 141, 127, 169, 153, 157, 169, 163, 154, 171, 171, 136, 175, 133, 144, 137, 148, 156, 128, 164, 144, 170, 165, 154, 137, 139, 156, 173, 138, 150, 145, 129, 172, 130, 141, 173, 131, 159, 172, 171, 128, 168, 173, 159, 174, 161, 157, 163, 160, 134, 149, 145, 147, 131, 144, 127, 173, 137, 168, 125, 145, 173, 145, 166, 131, 133, 153, 143, 150, 131, 151, 162, 165, 131, 172, 152, 138, 167, 161, 129, 175, 148, 148, 129, 151, 146, 165, 128, 167, 148, 160, 140, 169, 130, 167, 135, 174, 147, 150, 173, 154, 157, 130, 156, 170, 132, 139, 132, 149, 157, 172, 164, 127, 152, 139, 157, 154, 143, 153, 150, 153, 125, 155, 152, 167, 140, 166, 127, 158, 160, 130, 136, 146, 166, 148, 173, 149, 156, 138, 139, 156, 146, 167, 137, 171, 133, 165, 157, 161, 173, 163, 162, 152, 166, 144, 133, 174, 135, 133, 134, 149, 133, 151, 127, 141, 135, 138, 136, 133, 149, 130, 152, 161, 166, 149, 125, 143, 162, 160, 173, 161, 174, 168, 163, 147, 157, 169, 164, 130, 126, 158, 165, 166, 173, 158, 132, 160, 154, 144, 137, 174, 154, 138, 125, 139, 167, 145, 164, 139, 130, 172, 156, 168, 166, 166, 152, 137, 161, 148, 141, 131, 167, 152, 154, 173, 175, 142, 151, 158, 148, 129, 136, 158, 172, 147, 136, 135, 175, 165, 165, 129, 141, 156, 145, 133, 173, 148, 145, 163, 129, 154, 143, 147, 149, 151, 140, 142, 173, 174, 174, 135, 162, 133, 125, 173, 133, 146, 145, 162, 125, 175, 135, 157, 158, 144, 134, 129, 164, 140, 170, 148, 172, 126, 132, 156, 145, 151, 128, 161, 128, 164, 152, 172, 135, 170, 145, 151, 134, 161, 152, 140, 171, 151, 165, 149, 140, 174, 149, 159, 144, 160, 171, 175, 174, 153, 133, 171, 172, 157, 135, 135, 158, 170, 128, 128, 135, 173, 140, 128, 133, 126, 143, 166, 156, 160, 163, 133, 175, 131, 158, 130, 150, 155, 147, 152, 150, 127, 129, 139, 167, 172, 125, 158, 151, 130, 135, 158, 165, 168, 155, 144, 143, 170, 161, 163, 162, 128, 131, 156, 166, 167, 133, 131, 158, 174, 147, 166, 169, 156, 171, 138, 148, 169, 141, 153, 156, 164, 168, 141, 166, 141, 160, 154, 158, 128, 166, 156, 158, 167, 138, 162, 133, 148, 150, 130, 161, 173, 168, 161, 157, 133, 144, 145, 128, 169, 156, 162, 169, 150, 154, 165, 138, 156, 172, 132, 156, 133, 162, 164, 129, 152, 136, 145, 168, 168, 143, 173, 134, 146, 175, 125, 125, 133, 134, 125, 174, 138, 147, 155, 165, 143, 153, 142, 129, 174, 151, 138, 138, 142, 133, 158, 143, 169, 131, 170, 133, 152, 138, 132, 148, 165, 159, 174, 172, 161, 174, 129, 170, 170, 156, 174, 134, 133, 162, 174, 152, 144, 143, 164, 154, 151, 166, 140, 162, 163, 125, 148, 174, 144, 161, 149, 161, 173, 172, 129, 166, 159, 152, 150, 157, 169, 142, 131, 158, 159, 160, 154, 149, 171, 148, 137, 175, 140, 126, 126, 171, 171, 126, 157, 149, 153, 131, 126, 139, 128, 174, 130, 164, 136, 133, 152, 133, 160, 168, 153, 161, 171, 156, 135, 132, 172, 160, 166, 152, 136, 127, 172, 141, 159, 150, 166, 173, 152, 148, 131, 137, 158, 126, 134, 148, 173, 155, 131, 160, 130, 135, 141, 135, 144, 135, 173, 125, 161, 152, 170, 162, 164, 168, 158, 171, 167, 152, 141, 157, 126, 155, 166, 151, 140, 129, 137, 142, 171, 168, 151, 162, 144, 171, 154, 138, 156, 150, 127, 137, 137, 149, 162, 148, 146, 131, 172, 162, 158, 129, 169, 127, 168, 165, 141, 133, 165, 129, 155, 170, 138, 138, 158, 158, 136, 125, 170, 163, 133, 157, 167, 134, 133, 145, 166, 170, 158, 145, 134, 143, 151, 157, 134, 174, 169, 133, 175, 149, 175, 135, 168, 130, 167, 135, 167, 169, 172, 142, 165, 144, 163, 135, 164, 169, 149, 165, 139, 152, 144, 129, 142, 128, 131, 135, 127, 157, 133, 143, 171, 140, 144, 129, 142, 150, 174, 158, 156, 148, 160, 158, 158, 155, 127, 129, 164, 147, 150, 173, 130, 171, 146, 161, 167, 135, 125, 157, 167, 166, 125, 138, 127, 126, 125, 168, 127, 137, 149, 128, 164, 165, 160, 127, 134, 165, 154, 136, 159, 174, 155, 125, 162, 164, 167, 156, 142, 130, 151, 126, 168, 139, 148, 152, 136, 160, 163, 159, 143, 172, 149, 144, 143, 148, 159, 170, 131, 160, 166, 132, 147, 133, 139, 136, 153, 161, 170, 159, 151, 160, 148, 129, 163, 145, 135, 159, 173, 134, 161, 134, 143, 172, 127, 138, 126, 132, 168, 149, 164, 135, 169, 149, 131, 167, 144, 156, 173, 154, 151, 135, 125, 149, 130, 131, 172, 174, 161, 141, 10000, 1000, 2000, 3000]
var randombreakpointindex = Math.floor((Math.random() * breakpoints.length) + 1);
var xhr = new XMLHttpRequest();

var ex = "Seen 19.76 in #3728078. 49 games ago (18m 18s)"


/** BEGIN ENGINE INSTRUCTIONS */ 
engine.on('game_starting', start_game); 

engine.on('game_started', play_game); 

engine.on('game_crash', finish_game); 

engine.on('player_bet', process_player_bet); 

engine.on('cashed_out', cashout); 

engine.on('connected', script_connected); 

engine.on('disconnected', script_disconnected); 



// engine.on('msg', determineLastMartingale); 

// determineLastMartingale(); 
engine.chat(shibamessage); 

engine.on('msg', process_chat_message); 
/** END ENGINE INSTRUCTIONS */ 


/** BEGIN ENGINE LOGIC */ 
function script_connected(gamedata) { 
    console.log('script connected'); 
    engine.chat("[MONEYFALCON] The money falcon has come online"); 
    console.log('game history shown below upon connection'); 
    console.log(JSON.stringify(gamehistory)); 
} 

function script_disconnected(gamedata) { 
    console.log('script disconnected, stopping all bets if one in progress...'); 
    engine.cashOut(cocallback);
    console.log('summarizing game history - JSON shown below'); 
    console.log(JSON.stringify(gamehistory)); 
    console.log('stopping script'); 
    engine.stop();  
}

function start_game(gamedata) { 
    log_pre_game_data(gamedata); 
    calculate_net_profits(); 
    console.log("game # " + gameselapsed + " is starting..."); 
    calculate_win_rate(); 
    summarize(); 
    pregamebalance = engine.getBalance(); 


    console.log('balance before game #' + gameselapsed + ': ' + pregamebalance); 
    if (gamemode == 'NOT_SPECIFIED') { 
        console.log('No game mode specified - not playing'); 
    } else if (gamemode == 'COOLDOWN') { 
        console.log('Cooldown mode enabled - not playing for 3 consecutive rounds (elapsed games: ' + cooldownelapsed + ' / ' + cooldowncount + ')')
        // cooldowncount++; 
    } else if (gamemode == 'MIMIC') { 
        console.log('game mode is MIMIC'); 
        console.log('mimic user is ' + targetmimic); 
        currentbet = mimicbet; 
        var themultiplier = 1900; 
        engine.placeBet(formatbet(currentbet), themultiplier, false); 
        mimic = false; 
        gamemode = "MARTINGALE"; 
        currentbet = startingbet; 
    } else if (gamemode == 'MARTINGALE' || gamemode == 'MARTINGALE_HYBRID') { 


        // if (martingalewaitcount > gamewaitcount) { 
        //     martingalewaitcount = gamewaitcount;
        // }

        // var themultiplier = 1900; 
        if (martingalewaitcount == gamewaitcount || martingalewaitcount == 0) { 
            console.log('starting martingale'); 
            martingaletpi = Math.round(martingaletpi).toFixed(0);         
            martingaletpi = parseInt("" + martingaletpi);        

            if (gamemode == 'MARTINGALE_HYBRID') { 
                var randomten = Math.floor((Math.random() * breakpoints.length) + 1);
                if (randomten % 4 == 0) { 
                    randombreakpointindex = Math.floor((Math.random() * breakpoints.length) + 1);
                    martingaletpi = breakpoints[randombreakpointindex]
                    // martingaletpi = Math.round(martingaletpi).toFixed(0);       
                    console.log('Using hybrid martingale TPI');   
                }

                if (randomten % 2 == 0) { 
                    martingalebet = martingalebet * 1.15; 
                } else { 
                    martingalebet = martingalebet * 1.01; 
                } 
            }
            console.log('calling placebet ' + martingalebet + ' with take profit multiplier of ' + martingaletpi); 
            engine.placeBet(formatbet(martingalebet), martingaletpi, false); 
            currentbet = martingalebet; 
        } 
        // if (martingalewaitcount == gamewaitcount) { 
        //     martingalewaitcount = 0; 
        // } 
    }
}

function formatbet(betamount) { 
    return Math.round(betamount).toFixed(0)*100; 
}

function cashout(gamedata) { 
    log_cashout_data(gamedata); 
    if (mimic == true && gamedata.username == targetmimic) { 
        engine.cashOut(true); 
        console.log('cashed out when ' + targetmimic + ' did'); 
    } 
} 

function play_game(gamedata) { 
    var randindex = Math.floor((Math.random() * 10) + 1); // do not touch
    var count = 0; 
    if (verbose == true) { 
        console.log('index ' + randindex); 
        console.log("we are now playing the game");
        console.log(JSON.stringify(gamedata));  
        console.log('game #' + gameselapsed); 
    } 

    startgamerecords.push(gamedata); 

    for (var currentuser in gamedata) { 
        usersplaying.push(currentuser.username); 
    } 
    var founduser = false; 
    var targetindex = Math.floor((Math.random() * gamedata.length) + 1);
    for (var curuser in gamedata) { 
        if (curuser.username == targetmimic) { 
            founduser = true; 
        }
    }

    if (founduser == false || random_mimic == true) { 
        var count = 0; 
        for (var curuser in gamedata) { 

            if (count > targetindex) { 
                targetmimic = curuser.username; 
                console.log('new target mimic: ' + targetmimic); 
            }
            count++; 
        }
    }
}

function process_player_bet(gamedata) { 
    if (verbose == true) { 
        console.log('player bet occurred'); 
        console.log(JSON.stringify(gamedata)); 
    } 
}

function process_chat_message(gamedata) { 

    // if (gamedata.message == shibamessage && gamedata.username == botusername) { 

    // }
    var exregex = /(?:^|\s)Seen\s(.*?)\sin\s#(.*?).\s(.*?)\sgames\sago(.*?)/g;
    var regresult = exregex.exec(gamedata.message); 
    console.log(regresult[0]); 
    // if (gamedata.username == 'shiba' && parseFloat(regresult[0]) >= 19.0) { 
    //     console.log(regresult); 
    //     console.log(parseFloat(regresult[3]));
    //     lastmartingale = regresult[3]; 
    //     console.log("Last martingale was: " + lastmartingale + " games ago"); 
    // }

    // var stringtest = 'Seen 45.54 in #3728133. 1 games ago (1m 25s)'



    if (verbose == true) { 
        console.log('--------- CHAT MESSAGE BELOW -----------'); 
        console.log(JSON.stringify(gamedata)); 
        console.log('---------- END CHAT MESSAGE ------------');
    } 
    if (gamedata.message == 'FALCON help') { 
        engine.chat('[FALCONBOT]: Learn more about falcon bot at https://github.com/currentsea/moneybot'); 
    }
    if (gamedata.username == username) { 
        var match = falconregexp.exec(gamedata.message);

        if (match != undefined) { 
            var falconcommand = match[1]; 
            if (falconcommand == 'mimic') { 
                var mimicuser = match[2]; 
                var amount = match[3]; 
                mimic = true; 
                targetmimic = mimicuser;
                gamemode = "MIMIC";  
                mimicbet = parseInt(amount);  
                if (targetmimic == 'random') { 
                    random_mimic = true; 
                    engine.chat('[FALCONBOT]: we will bet ' + mimicbet + ' bits and cash out the same time a randomly selected user does next round (or 19x, whatever comes first)...'); 
                } else { 
                    engine.chat('[FALCONBOT]: we will bet ' + mimicbet + ' bits and cash out the same time ' + mimicuser +' does next round (or 10x, whatever comes first)... [if ' + mimicuser + ' is not playing in the next round we will pick a user to follow at random]'); 
                }

            } 
        } else { 
            if (gamedata.message == 'FALCON stop') { 
                console.log('FALCON is stopping'); 
                engine.chat('[FALCONBOT]: FALCON BOT stopping'); 
                engine.stop(); 
            }

            if (gamedata.message == 'FALCON summary') { 
                engine.chat('Size of game history record: ' + gamehistory.length); 
                console.log(JSON.stringify(startgamerecords)); 
                console.log(JSON.stringify(gamehistory)); 
            }

            if (gamedata.message == 'FALCON status') { 
                console.log('FALCON is online'); 
                engine.chat('[FALCONBOT]: FALCON BOT is online +'); 
            }

            if (gamedata.message == 'FALCON mode') { 
                console.log('FALCON is online'); 
                engine.chat('[FALCONBOT]: FALCON is currently using ' + gamemode + ' mode'); 
            }

            if (gamedata.message == 'FALCON gamecount') { 
                console.log('FALCON is online'); 
                gamesplayedcount = numwinners + numlosers; 
                engine.chat('[FALCONBOT]: Games Played: ' + gamesplayedcount + ' | Games Elapsed: ' + gameselapsed + ' | Games Won: ' + numwinners + ' | Games Lost: ' + numlosers + " | Median: " + historicalmedian); 
            } 

            if (gamedata.message == 'FALCON martingale') { 
                console.log('Setting game mode to martingale');
                gamemode = "MARTINGALE"; 
                engine.chat('[FALCONBOT]: Martingale mode activated - wait criteria of ' + gamewaitcount + ' must be acquired before we begin playing.'); 
            }

            if (gamedata.message == 'FALCON martingale immediately') { 
                gamemode = 'MARTINGALE'; 
                martingalewaitcount = gamewaitcount; 
                engine.chat('[FALCONBOT]: We will begun attempting the martingale streak immediately (no wait streak required)'); 
            } 

            if (gamedata.message == 'FALCON martingale hybrid') { 
                gamemode = 'MARTINGALE_HYBRID'; 
                martingalewaitcount = gamewaitcount; 
                engine.chat('[FALCONBOT]: We have entired martingale hybrid mode.  We will use a random multiplier to cashout for 20% of games moving forward.'); 
            } 

            if (gamedata.message == 'FALCON cooldown 2') { 
                cooldowncount = 2; 
                gamemode = 'COOLDOWN'; 
                engine.chat('[FALCONBOT]: we will not play for ' + cooldowncount + ' consecutive rounds'); 
            }
        }
    }
} 
/** END ENGINE LOGIC */ 

/** HELPERS */ 
function median(values) {
    values.sort( function(a,b) {return a - b;} );
    var half = Math.floor(values.length/2);
    var themedian = 0; 
    if (values.length % 2 == 0) { 
        themedian = values[half];
    }
    else { 
        var numerator = (values[half-1] + values[half]); 
        themedian =  numerator / 2.0;
    }
    return themedian; 
}

function finish_game(gamedata) { 
    console.log("Game is finished"); 
    console.log(gamedata); 
    log_post_game_data(gamedata); 
}

function log_pre_game_data(gamedata) { 
    console.log('--------------------------------------------'); 
    console.log('Game is starting - JSON shown below'); 
    console.log(JSON.stringify(gamedata)); 
} 

function log_post_game_data(gamedata) { 
    console.log('--------------------------------------------'); 
    console.log('Game is finished - JSON shown below'); 
    // console.log(JSON.stringify(gamedata)); 
    gamehistory.push(gamedata); 
    // console.log(JSON.stringify(gamehistory)); ingale
    summarize_history(gamedata); 
    var gameresultstatus = engine.lastGamePlay(); 
    laststatus = gameresultstatus; 
    if (gameresultstatus == 'WON') { 
        numwinners++; 
        gamesplayedcount++; 
        var baldiff = (engine.getBalance() / 100) - (pregamebalance / 100); 
        grosswinnings += baldiff; 
    } else if (gameresultstatus == 'LOST') { 
        numlosers++; 
        gamesplayedcount++; 
        grosslosses += currentbet; 
    } else { 
        numskipped++; 
    } 

    if (gamemode == 'MIMIC') {
        if (laststatus == 'WON') { 
            // engine.chat('[FALCONBOT] We mimicked ' + targetmimic + ' successfully and won the game!'); 
            console.log('Resetting game to martingale'); 
            gamemode = 'MARTINGALE'; 
        } else if (laststatus == 'LOST') { 
            console.log('Resetting game to martingale'); 
            gamemode = 'MARTINGALE'; 
            // engine.chat('[FALCONBOT] We mimicked ' + targetmimic + ' and failed miserably'); 
        }
    } 

    if (gamemode == 'MARTINGALE') { 
        // if (gamedata.game_crash < playgamecriteria) { 
        //     martingalecount = martingalecount + 1; 
        //     // console.log('martingale count: ' + martingalecount + ' out of ' + gamewaitcount); 

        // } else { 
        //     martingalecount = 0; 
        //     console.log('Martingale count reset to 0'); 
        // }
        if (laststatus == 'WON') { 
           console.log('We won the martingale after ' + martingalecount + ' games.'); 
            martingalebet = startingbet; 
        } else if (laststatus == 'LOST') {
            console.log("we lost the martingale (turn number " + martingalecount + ')'); 
            martingalebet = martingalebet * betincrement; 
            martingaletpi = martingaletpi * takeprofitincrementinterval
            console.log('next game will use bet of ' + martingalebet + ' with a take profit multiplier of ' + martingaletpi); 
        }
    } 
    if (gamemode == 'COOLDOWN') {
        if (cooldownelapsed >= cooldowncount) { 
            console.log('Cooldown complete - martingale activated again.'); 
            gamemode = 'MARTINGALE'; 
            cooldownelapsed = 0; 
            cooldowncount = 3; 
        }
    }
    if (gamemode == 'COOLDOWN' && laststatus == 'NOT_PLAYED') {
        cooldownelapsed = cooldownelapsed + 1;  
    } else if (gamemode == 'COOLDOWN' && (laststatus == 'WON' || laststatus == 'LOST')){ 
        console.log("MANUAL PLAY DETECTED DURING COOLDOWN - Last game (" + laststatus + ") does not count toward required cooldown target of " + cooldowncount + ' games.')
    }
    gameselapsed++; 
    currentbalance = engine.getBalance(); 
    if (verbose == true) { 
        console.log("GAMES ELAPSED: " + gameselapsed); 
    } 

    if (cooldownelapsed >= cooldowncount) { 
        gamemode = 'MARTINGALE'; 
        cooldownelapsed = 0; 
    } else { 
        cooldownelapsed = cooldownelapsed + 1; 
    }
} 

function log_cashout_data(gamedata) { 
    if (verbose == true) {
        console.log('--------------------------------------------'); 
        console.log('Player cashed out - JSON shown below'); 
        console.log(JSON.stringify(gamedata)); 
    }
} 

function summarize_history(gamedata) { 
    medianvalues = []; 

    for (var gamehistoryitem in gamedata) {
      medianvalues.push(gamehistoryitem.game_crash); 
    }
    historicalmedian = median(medianvalues); 
    return historicalmedian; 

} 

function calculate_win_rate() { 
    if (numwinners > 0 && numlosers > 0) {
        var modifier =  numwinners / numlosers; 
        winrate = modifier*100;
    }
    if (numwinners > 0 && numlosers == 0){
        winrate = 100;
    }
    return winrate; 
} 

function calculate_net_profits() { 
    console.log("calculating net profits..."); 
    profits_have_changed = grosswinnings > 0 && grosslosses > 0; 
    var netchange = 0; 
    if (profits_have_changed == true){
        var oldnet = netprofits; 
        netprofits = ((grosswinnings / grosslosses ) * 100);
        netchange = oldnet - netprofits; 
        console.log("net profits have changed by " + netchange + " to " + netprofits); 
    } else { 
        console.log('net profits have not changed'); 
    }
    return netprofits; 
}

function summarize() { 
    totalprofit = grosswinnings - grosslosses; 
    if (verbose == true) { 
        console.log('============================================'); 
        console.log('==> Starting game... '); 
        console.log('==> Gross Winnings: ' + grosswinnings); 
        console.log('==> Gross Losses: ' + grosslosses); 
        console.log('==> Gain/Loss of ' + totalprofit); 
        console.log('==> # of games won: ' + numwinners); 
        console.log('==> # of games lost: ' + numlosers); 
        console.log('==> % of games won: ' + winrate + numlosers); 
        console.log('==> # of games elapsed: ' + gameselapsed); 
        console.log('============================================'); 

    } else { 
        console.log('starting new game -- wins: ' + numwinners + ' | losses: ' + numlosers + ' | grosswinnings: ' + grosswinnings + ' | grosslosses: ' + grosslosses + " | totalprofit: " + totalprofit); 
    }

}

function cocallback(gamedata) { 
    console.log("Cashed out!"); 
} 
function loadJSON(path, success, error) {
    xhr.onreadystatechange = function () {
        if (xhr.readyState === XMLHttpRequest.DONE) {
            if (xhr.status === 200) {
                if (success)
                    success(JSON.parse(xhr.responseText));
            } else {
                if (error)
                    error(xhr);
            }
        }
    }; 
    xhr.open("GET", path, true);
    xhr.send();
}

// function determineLastMartingale() { 

// }

if (verbose == true) { 
    loadJSON('transfer.json', function(data) { console.log(JSON.stringify(data)); }, function(xhr) { console.error(xhr); });
}

